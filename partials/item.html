<a href="/#/"><- All Items</a>

<section id="item">
    <h1>{{item.title}} <small>Usage</small></h1>
    <section id="usage">
        <header>

        </header>
        <section class="add-usage text-center">
            <header>
                <h3>Log Use</h3>
            </header>
            <form id="add_usage" class="form-group" ng-submit="createUsage(date, amount)">
                <label>Used on (date)
                    <input type="date" class="form-control" placeholder="2014-09-08" ng-model="date" required/>
                </label>
                <label>Amount (g)
                    <input type="number" class="form-control" step="any" placeholder="0.25" ng-model="amount" required/>
                </label>
                <input type="submit" value="Log" class="btn btn-primary"/>
            </form>
        </section>
        <hr/>

        <section class="usages">
            <header ng-show="usages.length">
                <h3>All Uses
                    <small>
                        <i  class="fa fa-pencil-square-o"
                            ng-click="showUsageEdit = !showUsageEdit"
                            ng-init="showUsageEdit=false"
                            ng-show="!showUsageEdit">
                        </i>
                        <i  class="fa fa-times"
                            ng-click="showUsageEdit = !showUsageEdit"
                            ng-show="showUsageEdit">
                        </i>
                    </small>
                </h3>
            </header>
            <div chart ng-show="usages.length && !showUsageEdit"></div>
            <div ng-show="showUsageEdit">
                <table class="table table-striped table-responsive">
                    <tr ng-repeat="use in usages">
                        <td>
                            <b>{{use.date | date:'MM-dd-yyyy'}}</b>
                            <small>
                                (<span timeago="{{use.date}}"></span>)
                            </small>
                        </td>
                        <td>{{use.amount}} grams</td>
                        <td class="text-right">

                            <button class="btn btn-sm btn-danger" ng-click="confirm = !confirm" ng-init="confirm=false" ng-hide="confirm">Delete</button>
                            <div ng-show="confirm">
                                <b>Are you sure?</b>
                                <button class="btn btn-sm btn-default" ng-click="confirm = !confirm">Cancel</button>
                                <button class="btn btn-sm btn-danger" ng-click="deleteUsage(use)">Delete</button>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
            <h1 ng-show="!usages.length">No uses logged</h1>
        </section>

    </section>
    <hr/>
    <button class="btn btn-danger pull-right" ng-click="delete(item)">Delete "{{item.title}}"</button>
    <br/>
</section>
